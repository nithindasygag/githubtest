<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <title>Create Profile:</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>

    <div style="width:50%; margin: auto; padding:30px; border:1px solid blue; background-color:#A9DFBF">
        <form action="{% url 'create' %}" method="post" id="post-id" enctype="multipart/form-data">
             {{form.as_p}}
<!--            <div class="form-group">-->
<!--                <label for="fname">{{ form.first_name.label_tag }}:</label><br>-->
<!--                {{form.first_name}}-->
<!--&lt;!&ndash;                <input type="text" id="fname" class="form-control" name="first_name" required><br>&ndash;&gt;-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="lname">{{ form.last_name.label_tag }}:</label><br>-->
<!--                {{form.last_name}}-->
<!--&lt;!&ndash;                <label for="lname">LAST NAME :</label><br>&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="text" id="lname" class="form-control" name="last_name" required><br>&ndash;&gt;-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="img">PROFILE IMAGE :</label><br>-->
<!--                <input type="file" id="img" name="img" accept="image/*" class="form-control-file"><br><br>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="dept">DEPARTMENT :</label><br>-->
<!--                <select name="dept" id="dept" class="form-control" style="background-color:grey">-->
<!--                    {% for dept in dept_choices %}-->
<!--                        <option value="{{dept}}">{{dept.get_department_display}}</option>-->
<!--                   {% endfor %}-->
<!--&lt;!&ndash;                    <option value="spcl">Special</option>&ndash;&gt;-->
<!--&lt;!&ndash;                    <option value="nrml">Normal</option>&ndash;&gt;-->
<!--                </select><br>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="pnmbr">PHONE NUMBER :</label><br>-->
<!--                <input type="tel" id="pnmbr" class="form-control" name="pnmbr" maxlength="10"><br>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="addr1">APARTMENT :</label><br>-->
<!--                <input type="text" id="addr1" class="form-control" name="addr1">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="addr2">STREET :</label><br>-->
<!--                <input type="text" id="addr2" class="form-control" size="10" name="addr2">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="addr3">CITY :</label><br>-->
<!--                <input type="text" id="addr3" class="form-control" name="addr3">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="zip">ZIPCODE :</label><br>-->
<!--                <input type="text" id="zip" class="form-control" name="zip"><br><br>-->
<!--            </div>-->

            <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-primary" >SUBMIT</button>
            </div>
        </form>
    </div>
</body>
<script>
    $('#post-id').on('submit', function(event){
    event.preventDefault();
    var formData = new FormData();
      //Form data
        var form_data = $('#post-id').serializeArray();
        $.each(form_data, function (key, input) {
            formData.append(input.name, input.value);
        });

        //File data
        var file_data = $('input[name="profile_image"]')[0].files;
        for (var i = 0; i < file_data.length; i++) {
            formData.append("profile_image", file_data[i]);
        }

				console.log(formData)

        $.ajax({
          type: "POST",
          data: formData,
          dataType: "json",
          url:'create',
          processData: false,
          contentType: false,
          success: function(data) {
               alert('Sucess! Form data posted with file type of input also!');
    			},
          error: function(xhr, ajaxOptions, thrownError){
        		alert(thrownError + '\n' + xhr.status + '\n' + ajaxOptions);
   				 }
         });
    });

</script>